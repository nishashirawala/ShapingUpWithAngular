<!doctype html>
<html ng-app="gemStore">
  <head>
  	<link rel="stylesheet" type="text/css" href="css/bootstrap.min.css" />
    <script src="https://ajax.googleapis.com/ajax/libs/angularjs/1.5.0/angular.min.js"></script>
    <script type="text/javascript" src="js/app.js"> </script>
  </head>
  <body ng-controller="StoreController as storeCtrl">
  	<ul class="list-group">
  		<li class = "list-group-item" ng-repeat = "product in storeCtrl.products" ng-hide="product.soldOut">
	      <h1> {{product.name}}</h1>
	      <em class="pull-right"> {{product.price | currency}}</em>
	      <img ng-src="{{product.images[0].full}}" />
	      
	      <button ng-show="product.canPurchase">Add to Cart </button>

	      <section ng-controller="PanelController as panelCtrl">
	      	<ul class="nav nav-pills">
	      		<li ng-class="{active: panelCtrl.isSelected(1)}"> <a href ng-click="panelCtrl.selectTab(1)"> Description </a> </li>	
	      		<li ng-class="{active: panelCtrl.isSelected(2)}"> <a href ng-click="panelCtrl.selectTab(2)"> Specification </a> </li>	
	      		<li ng-class="{active: panelCtrl.isSelected(3)}"> <a href ng-click="panelCtrl.selectTab(3)"> Reviews </a> </li>	
	      	</ul>
	      

		      <div class="panel" ng-show="panelCtrl.isSelected(1)">
		      	<h4>Description</h4>
		      	<p> {{product.description}} </p>
		      </div>
		      <div class="panel" ng-show="panelCtrl.isSelected(2)">
		      	<h4>Specification</h4>
		      	<blockquote> None </blockquote>
		      </div>
		      <div class="panel" ng-show="panelCtrl.isSelected(3)">
		      	<h4>Reviews</h4>
		      	<blockquote ng-repeat = "review in product.reviews">
		      	 	<b>Stars : {{review.stars}} </b>
		      	 	{{review.body}}
		      	 	<cite> by {{review.author}} </cite> 
		      	</blockquote>

		      	<form name="reviewForm" ng-controller="ReviewController as reviewCtrl">
		      		<!-- live review panel : start -->
		      		<blockquote>
			      	 	<b>Stars : {{review.stars}} </b>
			      	 	{{review.body}}
			      	 	<cite> - {{review.author}} </cite> 
		      		</blockquote>
		      		<!-- live review panel : end -->

			      	<h4> Submit a Review </h4>
			      	<select ng-model="review.stars">
			      		<option value="1">1 star</option>
			      		<option value="2">2 stars</option>
			      		<option value="3">3 stars</option>
			      		<option value="4">4 stars</option>
			      		<option value="5">5 stars</option>
			      	</select>
			      	<br/><br/>
			      	<textarea ng-model="review.body"></textarea>
			      	<br/><br/>
			      	<label> by : </label>
			      	<input ng-model="review.author" type="email" />
			      	<br/><br/>
			   	   	<input type="submit" value="submit" />
			   	  </form>
			   </div>
		   </section>
		</li>
  	</ul>
  </body>
</html>